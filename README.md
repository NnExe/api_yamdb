# API_YAMDB
- [Введение](#введение)
- [Установка](#установка)
- [Загрузка данных](#загрузка-данных)
- [Endpoints](#endpoints)
  - [auth](#auth)
  - [categories](#categories)
  - [genres](#genres)
  - [titles](#titles)
  - [reviews](#reviews)
  - [comments](#comments)
  - [users](#users)
- [О разработчиках](#о-разработчиках)

## Введение
Проект YaMDb собирает отзывы (Review) пользователей на произведения (Titles). Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий (Category) может быть расширен администратором (например, можно добавить категорию «Изобразительное искусство» или «Ювелирка»).
Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.
В каждой категории есть произведения: книги, фильмы или музыка. Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Насекомые» и вторая сюита Баха.
Произведению может быть присвоен жанр (Genre) из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). Новые жанры может создавать только администратор.
Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы (Review) и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.

## Установка

Клонировать репозиторий и перейти в него в командной строке:

```
git clone git@github.com:AIBogdanov/api_yamdb.git
```

```
cd api_yamdb
```

Cоздать и активировать виртуальное окружение:

```
python3 -m venv env
```

```
source venv/bin/activate
```

Установить зависимости из файла requirements.txt:

```
python3 -m pip install --upgrade pip
```

```
pip install -r requirements.txt
```

Выполнить миграции:

```
python3 manage.py migrate
```

Запустить проект:

```
python3 manage.py runserver
```

## Загрузка данных
В репозитории по пути [/static/data/](/tree/feature/auth/api_yamdb/static/data) находятся примеры csv-файлов c тестовыми данными для используемых баз.
Можно загрузить тестовые данные в проект:
```
python3 manage.py <base_name> <file_name>
```
Где ```<base_name>``` принимает одно из значений ```user|category|genre|title|review|comment|genretitle```.
Рекомендуемый порядок загрузки данных (некоторые базы могут ссылаться на другие):
```
1. user
2. category
3. genre
4. title
5. review
6. comment
7. genretitle
```

## Endpoints
Для удобства описания и масштабирования протокол, хост и порт приложения опущены, по умолчанию это ```http://localhost:8000```. Все "эндпойнты" приложения начинаются с ```/api/v1/```. 
Подробную информацию о них можно посмотреть на странице ```/redoc/```

### auth
Запросы связанные с регистрацией и авторизацией начинаются ```/auth```
```
/auth/signup/
```
Предназначен для регистрации новых пользователей, входные данные:
```
{
  "email": "string",
  "username": "string"
}
```
При удачном выполнении запроса создаётся пользователь в базе данных и на ```email``` отправляется письмо с кодом подтверждения

```
/auth/token/
```
Предназначен для получения JWT-токена, который будет использоваться при последующей авторизации, входные данные:
```
Copy
{
"username": "string",
"confirmation_code": "string"
}
```
При удачном выполнении запроса выдаётся ответ в формате:
```
{
"token": "string"
}
```
